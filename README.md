# Montezuma's Revenge å¼ºåŒ–å­¦ä¹ è§£å†³æ–¹æ¡ˆ

åŸºäºæ·±åº¦å¼ºåŒ–å­¦ä¹ è§£å†³ã€Šè’™ç‰¹ç¥–ç›çš„å¤ä»‡ã€‹æ¸¸æˆä¸­çš„ç¨€ç–å¥–åŠ±é—®é¢˜

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®å®ç°äº†ä¸¤ç§å¼ºåŒ–å­¦ä¹ ç®—æ³•æ¥æé«˜Atariæ¸¸æˆã€Šè’™ç‰¹ç¥–ç›çš„å¤ä»‡ã€‹ä¸­çš„æ¢ç´¢æ•ˆç‡ï¼š
- **DQN + RND** - ä½¿ç”¨éšæœºç½‘ç»œè’¸é¦ç”Ÿæˆå†…åœ¨å¥–åŠ±
- **DQN + ICM** - åŸºäºé¢„æµ‹è¯¯å·®çš„å†…åœ¨åŠ¨æœºæœºåˆ¶

## æ ¸å¿ƒç‰¹æ€§

- ğŸ¯ ç¨€ç–å¥–åŠ±ç¯å¢ƒçš„é«˜æ•ˆæ¢ç´¢
- ğŸ§  åŸºäºå¥½å¥‡å¿ƒçš„å†…åœ¨åŠ¨æœºæœºåˆ¶
- ğŸ“Š å®Œæ•´çš„è®­ç»ƒç›‘æ§ä¸å¯è§†åŒ–
- ğŸ”„ å¯å¤ç°çš„å®éªŒé…ç½®

## ç®—æ³•åŸç†

| ç®—æ³• | æ ¸å¿ƒæœºåˆ¶ | é€‚ç”¨åœºæ™¯ |
|------|---------|---------|
| **DQN + RND** | éšæœºç½‘ç»œè’¸é¦ç”Ÿæˆæ–°é¢–çŠ¶æ€å¥–åŠ± | é«˜åº¦ç¨€ç–å¥–åŠ±ç¯å¢ƒ |
| **DQN + ICM** | åŸºäºé¢„æµ‹è¯¯å·®çš„å†…åœ¨å¥½å¥‡å¿ƒ | éœ€è¦çŠ¶æ€è½¬æ¢ç†è§£çš„ç¯å¢ƒ |

## ç¯å¢ƒé…ç½®

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

ä¸»è¦ä¾èµ–ï¼š
- Python 3.8+
- PyTorch 1.9+
- Gymnasium[atari]
- NumPy, Matplotlib
- Tensorboard

## ä½¿ç”¨æŒ‡å—

### è®­ç»ƒæ¨¡å‹

```bash
# è®­ç»ƒDQN+RNDæ¨¡å‹
python train.py --agent dqn_rnd --env MontezumaRevengeNoFrameskip-v4

# è®­ç»ƒDQN+ICMæ¨¡å‹
python train.py --agent dqn_icm --env MontezumaRevengeNoFrameskip-v4
```

### è¯„ä¼°ä¸å¯è§†åŒ–

```bash
# è¯„ä¼°è®­ç»ƒå¥½çš„æ¨¡å‹
python evaluate.py --model_path saved_models/dqn_rnd_best.pth

# å¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹
tensorboard --logdir logs/
```

### æ¼”ç¤ºæ¸¸æˆ

ä½¿ç”¨`demo.py`è„šæœ¬å¯ä»¥ç›´è§‚åœ°æ¼”ç¤ºè®­ç»ƒå¥½çš„æ™ºèƒ½ä½“å¦‚ä½•åœ¨æ¸¸æˆä¸­è¡¨ç°ï¼š

```bash
# æ¼”ç¤ºDQN+RNDæ¨¡å‹æ¸¸ç©
python demo.py --model_path saved_models/dqn_rnd_best.pth --episodes 3

# ä¿å­˜æ¸¸æˆå›æ”¾ä¸ºGIF
python demo.py --model_path saved_models/dqn_icm_best.pth --save_gif --gif_path results/demo.gif

# ä¸æ¸²æŸ“ç•Œé¢ï¼ˆä»…è®°å½•ç»Ÿè®¡æ•°æ®ï¼‰
python demo.py --model_path saved_models/dqn_rnd_best.pth --no_render
```

### å®éªŒæ¯”è¾ƒ

ä½¿ç”¨`compare_experiments.py`è„šæœ¬è¿›è¡Œä¸åŒç®—æ³•çš„ç³»ç»Ÿæ€§æ¯”è¾ƒå®éªŒï¼š

```bash
# æ¯”è¾ƒDQN+RNDå’ŒDQN+ICMæ€§èƒ½ï¼ˆé»˜è®¤å„è¿›è¡Œ3æ¬¡è¿è¡Œï¼‰
python compare_experiments.py --agents dqn_rnd dqn_icm --runs 3

# è‡ªå®šä¹‰å®éªŒåç§°å¹¶æŒ‡å®šè¾“å‡ºç›®å½•
python compare_experiments.py --agents dqn_rnd dqn_icm --experiment curiosity_comparison --output_dir results/comparisons

# ç”Ÿæˆæ¯”è¾ƒå›¾è¡¨
python compare_experiments.py --load_only --experiment_dirs results/exp1 results/exp2 --plot
```

## å¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹è¯¦è§£

æœ¬é¡¹ç›®æä¾›äº†ä¸¤ç§è®­ç»ƒå¯è§†åŒ–æ–¹å¼ï¼š

### 1. TensorBoard å®æ—¶ç›‘æ§

è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå…³é”®æŒ‡æ ‡ä¼šè¢«è®°å½•åˆ°TensorBoardï¼ŒåŒ…æ‹¬ï¼š

- **å¥–åŠ±**ï¼šå¤–éƒ¨å¥–åŠ±ã€å†…éƒ¨å¥–åŠ±å’Œæ€»å¥–åŠ±
- **æŸå¤±å‡½æ•°**ï¼šDQNæŸå¤±ã€RND/ICMé¢„æµ‹æŸå¤±
- **æ¢ç´¢æŒ‡æ ‡**ï¼šçŠ¶æ€è®¿é—®çƒ­å›¾ã€epsilonå€¼å˜åŒ–
- **ç½‘ç»œæ¢¯åº¦**ï¼šå„å±‚å‚æ•°æ¢¯åº¦èŒƒæ•°

å¯åŠ¨TensorBoardæŸ¥çœ‹è®­ç»ƒå®æ—¶æ•°æ®ï¼š

```bash
tensorboard --logdir logs/
```

è®¿é—®`http://localhost:6006`æŸ¥çœ‹å¯è§†åŒ–ç•Œé¢ã€‚

### 2. è®­ç»ƒæŠ¥å‘Šç”Ÿæˆ

è®­ç»ƒç»“æŸåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”ŸæˆåŒ…å«ä»¥ä¸‹å†…å®¹çš„å¯è§†åŒ–æŠ¥å‘Šï¼š

- å¥–åŠ±æ›²çº¿ï¼ˆå«æ»‘åŠ¨å¹³å‡ï¼‰
- æ¯è½®æ­¥æ•°ç»Ÿè®¡
- æ¢ç´¢è¦†ç›–ç‡åˆ†æ
- ç½‘ç»œæƒé‡åˆ†å¸ƒ

è®­ç»ƒæŠ¥å‘Šä¿å­˜åœ¨`results/`ç›®å½•ä¸‹ã€‚

### å¯è§†åŒ–ç³»ç»Ÿå·¥ä½œåŸç†

è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œ`TrainingVisualizer`ç±»è´Ÿè´£ï¼š

1. æ”¶é›†è®­ç»ƒæŒ‡æ ‡å¹¶ä¿å­˜åˆ°å†…å­˜å’Œç£ç›˜
2. å®šæœŸç”Ÿæˆå¯è§†åŒ–å›¾è¡¨
3. é€šè¿‡TensorBoard Writerè®°å½•å®æ—¶æ•°æ®

æ¯ä¸ªå®éªŒä¼šç”Ÿæˆç‹¬ç«‹çš„æ—¥å¿—ç›®å½•ï¼Œä¾¿äºæ¯”è¾ƒä¸åŒç®—æ³•å’Œå‚æ•°è®¾ç½®çš„æ€§èƒ½å·®å¼‚ã€‚

## é¡¹ç›®ç»“æ„

```
zuma/
â”œâ”€â”€ agents/           # æ™ºèƒ½ä½“å®ç°
â”‚   â”œâ”€â”€ dqn_rnd.py    # DQN+RNDç®—æ³•
â”‚   â”œâ”€â”€ dqn_icm.py    # DQN+ICMç®—æ³•
â”‚   â””â”€â”€ base_agent.py # åŸºç¡€æ™ºèƒ½ä½“ç±»
â”œâ”€â”€ models/           # ç¥ç»ç½‘ç»œæ¨¡å‹
â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”œâ”€â”€ logs/             # è®­ç»ƒæ—¥å¿—
â”œâ”€â”€ saved_models/     # ä¿å­˜çš„æ¨¡å‹
â”œâ”€â”€ results/          # å®éªŒç»“æœ
â”œâ”€â”€ train.py          # è®­ç»ƒè„šæœ¬
â”œâ”€â”€ evaluate.py       # è¯„ä¼°è„šæœ¬
â”œâ”€â”€ demo.py           # æ¸¸æˆæ¼”ç¤ºè„šæœ¬
â”œâ”€â”€ compare_experiments.py # å®éªŒæ¯”è¾ƒè„šæœ¬
â”œâ”€â”€ config.yaml       # é…ç½®æ–‡ä»¶
â””â”€â”€ requirements.txt  # ä¾èµ–åˆ—è¡¨
```

## å®éªŒç»“æœ

è¯¦ç»†çš„å®éªŒç»“æœå’Œåˆ†æè¯·æŸ¥çœ‹ `results/` ç›®å½•ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›é¡¹ç›®ã€‚
